<Project Sdk="MSBuild.Sdk.Extras/3.0.23">

  <PropertyGroup>
    
    <!-- Assembly Information -->
    <AssemblyName>Heirloom</AssemblyName>

    <!-- Description -->
    <Description>A 2D graphics and audio framework for Windows, Linux and Android.</Description>

    <!-- Target frameworks -->
    <TargetFrameworks>net5.0;monoandroid11.0</TargetFrameworks>
    
    <!-- Constants and Namespace -->
    <DefineConstants>STBSHARP_INTERNAL</DefineConstants>
    <RootNamespace>Heirloom</RootNamespace>

  </PropertyGroup>
  
  <!-- Import standard project properties -->
  <Import Project="../../Heirloom.targets" />

  <ItemGroup>
    <!-- Disable compilation of all platform files until explicitly enabled -->
    <Compile Remove="Platforms/**/*.cs" />
    <None Include="Platforms/**/*.cs" />
  </ItemGroup>

  <!-- NET5 PROPERTIES -->
  <PropertyGroup Condition=" $(TargetFramework.StartsWith('net5')) ">
    <DefineConstants>$(DefineConstants);DESKTOP;</DefineConstants>
  </PropertyGroup>

  <!-- NET5 ITEMS -->
  <ItemGroup Condition=" $(TargetFramework.StartsWith('net5')) ">
    <ProjectReference Include="..\Heirloom.Desktop\Heirloom.Desktop.csproj" />
    <Compile Include="Platforms/Desktop/**/*.cs" />
  </ItemGroup>

  <!-- ANDROID PROPERTIES -->
  <PropertyGroup Condition=" $(TargetFramework.StartsWith('monoandroid')) ">
    <AndroidUseLatestPlatformSdk>false</AndroidUseLatestPlatformSdk>
    <TargetFrameworkVersion>v11.0</TargetFrameworkVersion>
    <DefineConstants>$(DefineConstants);ANDROID;</DefineConstants>
  </PropertyGroup>

  <!-- ANDROID ITEMS -->
  <ItemGroup Condition=" $(TargetFramework.StartsWith('monoandroid')) ">
    <ProjectReference Include="..\Heirloom.Android\Heirloom.Android.csproj" />
    <Compile Include="Platforms/Android/**/*.cs" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="Embedded\fonts\montserrat\Montserrat-Medium.ttf" />
    <None Remove="Embedded\fonts\montserrat\Montserrat-Bold.ttf" />
    <None Remove="Embedded\icon.png" />
    <None Remove="Embedded\monogram_extended.ttf" />
    <None Remove="Embedded\LDR_RGB1_0.png" />
    <None Remove="Embedded\Shaders\blur.frag" />
    <None Remove="Embedded\Shaders\default.frag" />
    <None Remove="Embedded\Shaders\default.vert" />
    <None Remove="Embedded\Shaders\distort.frag" />
    <None Remove="Embedded\Shaders\grayscale.frag" />
    <None Remove="Embedded\Shaders\invert.frag" />
    <None Remove="Embedded\Shaders\standard\standard.frag" />
    <None Remove="Embedded\Shaders\standard\standard.glsl" />
    <None Remove="Embedded\Shaders\standard\standard.vert" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="Embedded\fonts\montserrat\Montserrat-Regular.ttf" />
    <EmbeddedResource Include="Embedded\fonts\montserrat\Montserrat-Bold.ttf" />
    <EmbeddedResource Include="Embedded\fonts\monogram_extended.ttf" />
    <EmbeddedResource Include="Embedded\LDR_RGB1_0.png" />
    <EmbeddedResource Include="Embedded\Shaders\blur.frag" />
    <EmbeddedResource Include="Embedded\Shaders\default.frag" />
    <EmbeddedResource Include="Embedded\Shaders\default.vert" />
    <EmbeddedResource Include="Embedded\Shaders\distort.frag" />
    <EmbeddedResource Include="Embedded\Shaders\grayscale.frag" />
    <EmbeddedResource Include="Embedded\Shaders\invert.frag" />
    <EmbeddedResource Include="Embedded\Shaders\standard\standard.frag" />
    <EmbeddedResource Include="Embedded\Shaders\standard\standard.glsl" />
    <EmbeddedResource Include="Embedded\Shaders\standard\standard.vert" />
  </ItemGroup>

  <!-- StbImageSharp -->
  <ItemGroup>
    <!-- remove all files -->
    <None Remove="Drawing\External\StbImageSharp\**" />
    <Compile Remove="Drawing\External\StbImageSharp\**" />
    <EmbeddedResource Remove="Drawing\External\StbImageWriteSharp\**" />
    <!-- reintroduce only source files -->
    <Compile Include="Drawing\External\StbImageSharp\src\*.cs" />
  </ItemGroup>

  <!-- StbImageWriteSharp -->
  <ItemGroup>
    <!-- remove all files -->
    <None Remove="Drawing\External\StbImageWriteSharp\**" />
    <Compile Remove="Drawing\External\StbImageWriteSharp\**" />
    <EmbeddedResource Remove="Drawing\External\StbImageWriteSharp\**" />
    <!-- reintroduce only source files -->
    <Compile Include="Drawing\External\StbImageWriteSharp\src\*.cs" />
  </ItemGroup>

  <!-- StbTrueTypeSharp -->
  <ItemGroup>
    <!-- remove all files -->
    <None Remove="Drawing\External\StbTrueTypeSharp\**" />
    <Compile Remove="Drawing\External\StbTrueTypeSharp\**" />
    <EmbeddedResource Remove="Drawing\External\StbTrueTypeSharp\**" />
    <!-- reintroduce only source files -->
    <Compile Include="Drawing\External\StbTrueTypeSharp\src\*.cs" />
  </ItemGroup>

</Project>
